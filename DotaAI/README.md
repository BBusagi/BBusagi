# Dota 2 AI Coach

一个基于 AI 的 Dota 2 策略教练助手。通过读取游戏实时数据，在你玩游戏的同时，提供阵容分析、对线策略、团战时机等建议。

> 当前版本：V1 — GSI 数据接收与调试

---

## 这是什么

Dota 2 内置了一个叫 **GSI（Game State Integration）** 的官方功能：游戏运行时，客户端每秒向本机发送一次 JSON 数据，包含当前游戏时间、英雄状态、金钱、装备、选人信息等。

本项目在你电脑上启动一个本地服务器，接收这份数据，然后在**终端**里实时打印出来。V1 的目标是验证数据能正常接收，后续版本会接入 Claude AI 生成策略建议，并做成可视化界面。

**完全合规**：只使用 Valve 官方提供的接口，不读取游戏内存，不修改游戏文件。

---

## 准备工作

确认电脑上已安装：

- [Node.js](https://nodejs.org/) 18 或更高版本（安装后在终端运行 `node -v` 验证）
- Steam + Dota 2

---

## 安装

在终端进入本项目的 `DotaAI` 目录，安装依赖：

```bash
npm install
```

---

## 配置 Dota 2

这一步只需要做一次。将项目里的配置文件复制到 Dota 2 目录，让游戏知道往哪里发送数据。

**第一步：找到需要复制的文件**

项目目录中的：
```
DotaAI/config/gamestate_integration_coach.cfg
```

**第二步：复制到 Dota 2 的 cfg 目录**

Windows：
```
C:\Program Files (x86)\Steam\steamapps\common\dota 2 beta\game\dota\cfg\
```

macOS：
```
~/Library/Application Support/Steam/steamapps/common/dota 2 beta/game/dota/cfg/
```

**第三步：重启 Dota 2**

如果 Dota 2 正在运行，完全关闭后重新打开，配置才会生效。

---

## 启动

打开终端，在 `DotaAI` 目录下运行：

```bash
npm start
```

看到以下输出说明启动成功：

```
╔══════════════════════════════════════════════════╗
║        Dota 2 AI Coach — GSI 接收器 V1          ║
╚══════════════════════════════════════════════════╝

✓ 服务器已启动，监听 http://127.0.0.1:3001/gsi
  ...
── 等待 Dota 2 数据 ─────────────────────────────────
```

---

## 使用

**保持终端开着**，然后正常启动 Dota 2，进入选人界面或开始一局游戏。

游戏数据会自动推送过来，终端每秒刷新一次，显示类似：

```
──────────────────────────────────────────────────
[14:32:05]  第 42 条数据
  阶段：游戏中  |  游戏时间：5:20
  经济：金钱 1850  GPM 320
  战绩：1/0/2  补刀 42
  英雄：antimage  等级 6  HP 89%  MP 57%
  肉山：存活
```

选人阶段的输出：

```
──────────────────────────────────────────────────
[14:20:11]  第 3 条数据
  阶段：选人阶段  |  游戏时间：–
  选人：天辉 正在 Pick  剩余 28.5s
```

---

## 常见问题

**终端一直显示"等待 Dota 2 数据"，没有收到数据？**

1. 确认 cfg 文件已复制到正确目录
2. 确认 Dota 2 是在复制 cfg 文件之后启动的
3. 确认终端服务器在运行（能看到"服务器已启动"的提示）
4. 检查有无防火墙拦截 127.0.0.1:3001

**如何查看完整的原始 JSON 数据？**

```bash
npm run start:verbose
```

**没有 Dota 2，如何测试服务器是否正常工作？**

```bash
curl -X POST http://127.0.0.1:3001/gsi \
  -H "Content-Type: application/json" \
  -d @src/mock/laning.json
```

终端应立即打印一条模拟的游戏状态数据。

---

## 后续计划

- **V2**：接入 Claude AI，根据游戏实时状态生成策略建议
- **V3**：制作可视化界面（Electron 桌面应用 + 游戏内悬浮窗）
- **V4**：接入 OpenDota 历史数据，提供基于高段位统计的英雄推荐
